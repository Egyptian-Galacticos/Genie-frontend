<div class="p-6">
  <div class="mb-8">
    <div class="flex items-center gap-3 mb-4">
      <div
        class="w-12 h-12 rounded-full flex items-center justify-center"
        style="background: linear-gradient(135deg, var(--p-primary-500), var(--p-primary-400))"
      >
        <i class="pi pi-key text-white text-xl"></i>
      </div>
      <div>
        <h2 class="text-2xl font-bold m-0" style="color: var(--p-text-color)">Change Password</h2>
        <p class="text-sm m-0" style="color: var(--p-text-muted-color)">
          Update your account password for enhanced security
        </p>
      </div>
    </div>

    <p-message
      severity="info"
      text="For your security, please ensure your new password is strong and unique."
      styleClass="mb-6"
    ></p-message>
  </div>

  <div class="max-w-md mx-auto">
    <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="space-y-8">
      <div class="field">
        <p-floatlabel>
          <p-password
            id="current_password"
            formControlName="current_password"
            [feedback]="false"
            [toggleMask]="true"
            [class.ng-invalid]="isFieldInvalid('current_password')"
            styleClass="w-full"
            inputStyleClass="w-full"
            [style]="{ 'border-radius': '12px' }"
          ></p-password>
          <label for="current_password">Current Password *</label>
        </p-floatlabel>
        @if (isFieldInvalid('current_password')) {
          <small style="color: var(--p-red-500)" class="mt-1 block">
            {{ getFieldError('current_password') }}
          </small>
        }
      </div>
      <div class="field">
        <p-floatlabel>
          <p-password
            id="new_password"
            formControlName="new_password"
            [feedback]="false"
            [toggleMask]="true"
            [class.ng-invalid]="isFieldInvalid('new_password')"
            styleClass="w-full"
            inputStyleClass="w-full"
            [style]="{ 'border-radius': '12px' }"
          ></p-password>
          <label for="new_password">New Password *</label>
        </p-floatlabel>
        @if (isFieldInvalid('new_password')) {
          <small style="color: var(--p-red-500)" class="mt-1 block">
            {{ getFieldError('new_password') }}
          </small>
        }
      </div>

      <div class="field">
        <p-floatlabel>
          <p-password
            id="new_password_confirmation"
            formControlName="new_password_confirmation"
            [feedback]="false"
            [toggleMask]="true"
            [class.ng-invalid]="isFieldInvalid('new_password_confirmation')"
            styleClass="w-full"
            inputStyleClass="w-full"
            [style]="{ 'border-radius': '12px' }"
          ></p-password>
          <label for="new_password_confirmation">Confirm New Password *</label>
        </p-floatlabel>
        @if (isFieldInvalid('new_password_confirmation')) {
          <small style="color: var(--p-red-500)" class="mt-1 block">
            {{ getFieldError('new_password_confirmation') }}
          </small>
        }
      </div>

      <!-- Security Tips -->
      <div
        class="p-4 rounded-xl border border-dashed"
        style="background: var(--p-surface-100); border-color: var(--p-surface-300)"
      >
        <div class="flex items-start gap-3">
          <i class="pi pi-shield mt-1" style="color: var(--p-primary-500)"></i>
          <div>
            <p class="text-sm font-medium m-0 mb-2" style="color: var(--p-text-color)">
              Password Requirements
            </p>
            <ul
              class="text-xs space-y-1 list-disc ml-4 m-0"
              style="color: var(--p-text-muted-color)"
            >
              <li>At least 8 characters long</li>
              <li>Mix of uppercase and lowercase letters</li>
              <li>Include numbers and special characters</li>
              <li>Avoid common words or personal information</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="flex items-center justify-center gap-4 pt-6">
        <p-button
          type="button"
          label="Reset Form"
          severity="secondary"
          [outlined]="true"
          icon="pi pi-refresh"
          (onClick)="passwordForm.reset()"
          [disabled]="saving()"
          styleClass="transition-all duration-300 hover:scale-105"
          [style]="{ 'border-radius': '12px' }"
        ></p-button>

        <p-button
          type="submit"
          label="Change Password"
          icon="pi pi-shield"
          [loading]="saving()"
          [disabled]="passwordForm.invalid || saving()"
          styleClass="transition-all duration-300 hover:scale-105"
          [style]="{ 'border-radius': '12px' }"
        ></p-button>
      </div>
    </form>
  </div>
</div>
